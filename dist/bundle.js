(()=>{"use strict";var t,e,n=function(){function t(){}return t.new=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},t}(),r=function(){function t(t){void 0===t&&(t=!1),this._id=n.new(),this._runMany=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runMany",{get:function(){return this._runMany},enumerable:!1,configurable:!0}),t.MoveRight=new t(!0),t.MoveLeft=new t(!0),t.MoveUp=new t(!0),t.MoveDown=new t(!0),t.Stop=new t,t.MoveUpLeft=new t(!0),t.Die=new t(!1),t}(),o=function(){function t(t,e){this._center=t,this._radius=e}return Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"diameter",{get:function(){return 2*this.radius},enumerable:!1,configurable:!0}),t.overlaps=function(t,e){return t.center.distanceTo(e._center)<=t.radius+e.radius+1e-4},t.prototype.overlapsWith=function(e){return t.overlaps(this,e)},t}(),i=function(){function t(){}return t.new=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},t}(),a=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return new s(this.x,this.y)},enumerable:!1,configurable:!0}),t.from=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.dotProduct=function(t,e){return t.x*e.x+t.y*e.y},t.prototype.multipliedBy=function(e){return new t(this.x*e,this.y*e)},t.prototype.perpendicular=function(e){return void 0===e&&(e=!1),new t(-1*this.y,this.x)},t.prototype.projectOnto=function(e){return e.multipliedBy(t.dotProduct(this,e)/Math.pow(e.magnitude,2))},t.prototype.toString=function(){return"<".concat(this.x,",").concat(this.y,">")},t}(),s=function(){function t(t,e){this.x=t,this.y=e}return t.distance=function(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))},Object.defineProperty(t.prototype,"id",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),t.prototype.distanceTo=function(e){return t.distance(this,e)},t.prototype.equals=function(t){return null!=t&&this.x==t.x&&this.y==t.y},t.prototype.translate=function(e,n){return new t(this.x+e,this.y+n)},t.prototype.translateX=function(e){return new t(this.x+e,this.y)},t.prototype.translateY=function(e){return new t(this.x,this.y+e)},Object.defineProperty(t.prototype,"vector",{get:function(){return new a(this.x,this.y)},enumerable:!1,configurable:!0}),t.prototype.componentAlong=function(t){return a.dotProduct(this.vector,t)/t.magnitude},t.prototype.toString=function(){return"(".concat(this.x,",").concat(this.y,")")},t.random=function(e,n){return new t(i.new(0,e),i.new(0,n))},t}(),u=function(){function t(t,e,n,r){void 0===r&&(r=new s(0,0)),this._points=t,this._origin=r,this._width=e,this._height=n;var i=this._width/2,a=this._height/2,u=Math.sqrt(Math.pow(i,2)+Math.pow(a,2));this._circle=new o(r.translate(i,a),u)}return Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"circle",{get:function(){return this._circle},enumerable:!1,configurable:!0}),t.prototype.translateX=function(e){var n=[];return this.points.forEach((function(t){n.push(t.translateX(e))})),new t(n,this.width,this.height,this.origin.translateX(e))},t.prototype.translateY=function(e){var n=[];return this.points.forEach((function(t){n.push(t.translateY(e))})),new t(n,this.width,this.height,this.origin.translateY(e))},t.prototype.translate=function(e,n){var r=[];return this.points.forEach((function(t){r.push(t.translate(e,n))})),new t(r,this.width,this.height,this.origin.translate(e,n))},t.prototype.translateTo=function(e){var n=e.x-this.origin.x,r=e.y-this.origin.y,o=[];return this.points.forEach((function(t){o.push(t.translate(n,r))})),new t(o,this.width,this.height,this.origin.translate(n,r))},t.prototype.isValid=function(){return this.points.length>=3},t.square=function(e,n){return void 0===n&&(n=new s(0,0)),t.rectangle(e,e,n)},t.rectangle=function(e,n,r){void 0===r&&(r=new s(0,0));var o=[];return o.push(r),o.push(r.translateX(e)),o.push(r.translate(e,n)),o.push(r.translateY(n)),new t(o,e,n,r)},t.prototype.overlapsWith=function(t){if(!this.isValid())return!1;if(!this.circle.overlapsWith(t.circle))return!1;for(var e=0;e<this.points.length-1;e++){var n=a.from(this.points[e],this.points[e+1]).perpendicular();if(!this.overlapBetween(this.projectOnto(n),t.projectOnto(n)))return!1}return!0},t.prototype.overlapBetween=function(t,e){t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e}));var n=t[t.length-1],r=t[0],o=e[e.length-1],i=e[0];return r<=i?n>=i:o>=r},t.prototype.contains=function(t){return t.x>=this.origin.x&&t.x<=this.origin.x+this.width&&t.y>=this.origin.y&&t.y<=this.origin.y+this.height},t.prototype.projectOnto=function(t){var e,n,r=[];try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.points),i=o.next();!i.done;i=o.next()){var a=i.value;r.push(a.componentAlong(t))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t}(),c=function(){function t(){}return t.isNull=function(t){return void 0===t||null==t},t.notNull=function(t){return void 0!==t&&null!=t},t}(),l=function(){function t(t,e,n){this._block=t,this._from=e,this._to=n}return Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"block",{get:function(){return this._block},enumerable:!1,configurable:!0}),t}(),p=function(){function t(t,e,r,o){this._id=n.new(),this._type=e,this._polygon=t,this._state=r,this.animations=o,this._image=new Image}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygon",{get:function(){return this._polygon},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"at",{get:function(){return this.polygon.origin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){c.isNull(t)||c.isNull(this.state)||t.equals(this.state)||(this._state=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){var t=this.animations.get(this.state.name);return c.isNull(t)?null:t},enumerable:!1,configurable:!0}),t.prototype.overlapsWith=function(t){return this.polygon.overlapsWith(t.polygon)},t.prototype.move=function(t){var e=this._polygon;this._polygon=this._polygon.translateTo(t),c.isNull(this.OnMoved)||this.OnMoved(new l(this,e,this._polygon))},t.prototype.renderOn=function(t){var e;this._image.src=null===(e=this.animation)||void 0===e?void 0:e.image,t.drawImage(this.image,this.at.x,this.at.y,this.polygon.width,this.polygon.height)},t.MaxWidth=50,t.MaxHeight=50,t}(),h=function(){function t(t){this.loopCount=0,this.index=0,this.items=t}return t.prototype.add=function(t){this.items.push(t)},Object.defineProperty(t.prototype,"current",{get:function(){return this.items[this.index]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),t.prototype.next=function(){0!=this.items.length&&(this.index==this.items.length-1?(this.index=0,this.loopCount+=1,this.OnLoopCompleted(this.loopCount)):this.index++)},t.prototype.reset=function(){this.index=0},t}(),f=function(){function t(t){this.imageLoop=new h(t)}return t.prototype.cancel=function(){},t.prototype.play=function(){},t.prototype.stop=function(){},t.prototype.restart=function(){this.imageLoop.reset(),this.play()},t.prototype.reset=function(){this.imageLoop.reset()},Object.defineProperty(t.prototype,"image",{get:function(){return this.imageLoop.current},enumerable:!1,configurable:!0}),t}(),d=function(){function t(t){this._id=n.new(),this._name=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){return t.name==this.name},t.prototype.new=function(){return new t(this._name)},t.Idle=new t("Idle"),t.FacingRight=new t("FacingRight"),t.FacingLeft=new t("FacingLeft"),t.FacingUp=new t("FacingUp"),t.FacingDown=new t("FacingDown"),t.MovingRight=new t("MovingRight"),t.MovingLeft=new t("MovingLeft"),t.MovingUp=new t("MovingUp"),t.MovingDown=new t("MovingDown"),t.Dead=new t("Dead"),t}(),y=function(){function t(t){this._name=t}return t.Ground=new t("ground"),t.Player=new t("player"),t.Obstacle=new t("obstacle"),t}(),g=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),v=function(t){function e(n){var r=t.call(this,u.square(32),y.Player,d.Idle,e.Animations)||this;return r.name=n,r}return g(e,t),Object.defineProperty(e,"Animations",{get:function(){var t=new Map;return t.set(d.Idle.name,new f(["img/hero.png"])),t.set(d.FacingLeft.name,new f(["img/hero.png"])),t.set(d.FacingUp.name,new f(["img/hero.png"])),t.set(d.FacingRight.name,new f(["img/hero.png"])),t.set(d.FacingDown.name,new f(["img/hero.png"])),t.set(d.MovingLeft.name,new f(["img/hero.png"])),t.set(d.MovingUp.name,new f(["img/hero.png"])),t.set(d.MovingRight.name,new f(["img/hero.png"])),t.set(d.MovingDown.name,new f(["img/hero.png"])),t},enumerable:!1,configurable:!0}),e}(p),w=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(){return t.call(this,u.square(30),y.Player,d.Idle,e.Animations)||this}return w(e,t),Object.defineProperty(e,"Animations",{get:function(){var t=new Map;return t.set(d.Idle.name,new f(["img/ogre.png"])),t.set(d.FacingLeft.name,new f(["img/ogre.png"])),t.set(d.FacingUp.name,new f(["img/ogre.png"])),t.set(d.FacingRight.name,new f(["img/ogre.png"])),t.set(d.FacingDown.name,new f(["img/ogre.png"])),t.set(d.MovingLeft.name,new f(["img/ogre.png"])),t.set(d.MovingUp.name,new f(["img/ogre.png"])),t.set(d.MovingRight.name,new f(["img/ogre.png"])),t.set(d.MovingDown.name,new f(["img/ogre.png"])),t},enumerable:!1,configurable:!0}),e}(p),m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(t){function e(e,n,r){return t.call(this,u.rectangle(e,n),y.Ground,d.Idle,r)||this}return m(e,t),e.prototype.renderOn=function(t){var e;this._image.src=null===(e=this.animation)||void 0===e?void 0:e.image;var n=this.polygon.width/this._image.width,r=this.polygon.height/this._image.height;if(isFinite(n)&&isFinite(r))for(var o=Math.ceil(n),i=Math.ceil(r),a=0;a<o;a++)for(var s=0;s<i;s++)t.drawImage(this.image,this.at.x+a*this.image.width,this.at.y+s*this.image.height)},e}(p),O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(n,r){return t.call(this,n,r,e.Animations)||this}return O(e,t),Object.defineProperty(e,"Animations",{get:function(){var t=new Map;return t.set(d.Idle.name,new f(["img/ground-grass.png"])),t},enumerable:!1,configurable:!0}),e}(M),x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t){function e(){return t.call(this,u.square(15),y.Obstacle,d.Idle,e.Animations)||this}return x(e,t),Object.defineProperty(e,"Animations",{get:function(){var t=new Map;return t.set(d.Idle.name,new f(["img/log.png"])),t},enumerable:!1,configurable:!0}),e}(p),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(){return t.call(this,u.square(25),y.Obstacle,d.Idle,e.Animations)||this}return j(e,t),Object.defineProperty(e,"Animations",{get:function(){var t=new Map;return t.set(d.Idle.name,new f(["img/tree.png"])),t},enumerable:!1,configurable:!0}),e}(p),S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},C=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=function(){function t(){this.entries=new Map}return t.prototype.add=function(t){c.isNull(t)||(c.isNull(t.from)||this.deleteEntries(t.block,t.from.points),c.isNull(t.to)||this.addEntries(t.block,t.to.points))},t.prototype.remove=function(t){var e,n;try{for(var r=C(this.entries.values()),o=r.next();!o.done;o=r.next())o.value.delete(t.id)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.neighbors=function(t,e){var n,r,o,i,a,s,u,l,p,h,f,d,y,g,v,w,b;return void 0===e&&(e=null),S(this,(function(m){switch(m.label){case 0:n=null!=e?e:t.at,r=t.polygon.translateTo(n),o=new Map,m.label=1;case 1:m.trys.push([1,12,13,14]),i=C(r.points),a=i.next(),m.label=2;case 2:if(a.done)return[3,11];if(s=a.value,u=this.id(s),l=this.entries.get(u),c.isNull(l))return[3,10];m.label=3;case 3:m.trys.push([3,8,9,10]),w=void 0,p=C(l.values()),h=p.next(),m.label=4;case 4:return h.done?[3,7]:(f=h.value,t==f||o.has(f.id)?[3,6]:(o.set(f.id,!0),[4,f]));case 5:m.sent(),m.label=6;case 6:return h=p.next(),[3,4];case 7:return[3,10];case 8:return d=m.sent(),w={error:d},[3,10];case 9:try{h&&!h.done&&(b=p.return)&&b.call(p)}finally{if(w)throw w.error}return[7];case 10:return a=i.next(),[3,2];case 11:return[3,14];case 12:return y=m.sent(),g={error:y},[3,14];case 13:try{a&&!a.done&&(v=i.return)&&v.call(i)}finally{if(g)throw g.error}return[7];case 14:return[2]}}))},t.prototype.overlappers=function(t,e){var n,r,o,i,a,s,u,c;return void 0===e&&(e=null),S(this,(function(l){switch(l.label){case 0:n=null!=e?e:t.at,r=t.polygon.translateTo(n),l.label=1;case 1:l.trys.push([1,6,7,8]),o=C(this.neighbors(t,e)),i=o.next(),l.label=2;case 2:return i.done?[3,5]:(a=i.value,r.overlapsWith(a.polygon)?[4,a]:[3,4]);case 3:l.sent(),l.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return s=l.sent(),u={error:s},[3,8];case 7:try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))},t.prototype.ogres=function(t,e){var n,r,o,i,a,s;return void 0===e&&(e=null),S(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),n=C(this.overlappers(t,e)),r=n.next(),u.label=1;case 1:return r.done?[3,4]:(o=r.value)instanceof b?[4,o]:[3,3];case 2:u.sent(),u.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),a={error:i},[3,7];case 6:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 7:return[2]}}))},t.prototype.heros=function(t,e){var n,r,o,i,a,s;return void 0===e&&(e=null),S(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),n=C(this.overlappers(t,e)),r=n.next(),u.label=1;case 1:return r.done?[3,4]:(o=r.value)instanceof v?[4,o]:[3,3];case 2:u.sent(),u.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),a={error:i},[3,7];case 6:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 7:return[2]}}))},t.prototype.obstacles=function(t,e){var n,r,o,i,a,s;return void 0===e&&(e=null),S(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),n=C(this.overlappers(t,e)),r=n.next(),u.label=1;case 1:return r.done?[3,4]:(o=r.value).type!=y.Obstacle?[3,3]:[4,o];case 2:u.sent(),u.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),a={error:i},[3,7];case 6:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 7:return[2]}}))},t.prototype.addEntries=function(t,e){var n,r;try{for(var o=C(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=this.id(a),u=this.entries.get(s);c.isNull(u)&&this.entries.set(s,new Map),this.entries.get(s).set(t.id,t)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.deleteEntries=function(t,e){var n,r;try{for(var o=C(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=this.id(a),u=this.entries.get(s);c.isNull(u)||this.entries.get(s).delete(t.id)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.id=function(t){return"<".concat(Math.floor(t.x/p.MaxWidth),",").concat(Math.floor(t.y/p.MaxHeight),">")},t}(),D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.success=t,this.onSuccessArgs=e,this.onFailureArgs=n},R=function(t){function e(e,n){void 0===n&&(n=[]);var r=t.call(this)||this;return r.target=e,r.ogresToKill=n,r}return D(e,t),e}((function(){})),A=function(){function t(e,n,r,o,i,a){void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),this._id=t.Id(e,n),this._initialState=e,this._action=n,this._finalState=r,this.When=o,this.OnFailure=a,this.OnSuccess=i}return t.newMany=function(e,n,r){for(var o=Math.max(n.length,r.length),i=[];--o>=0;)i.push(new t(e,n[o],r[o]));return i},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this._initialState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finalState",{get:function(){return this._finalState},enumerable:!1,configurable:!0}),t.Id=function(t,e){return"<".concat(t.name,",").concat(e.id,">")},t}(),U=function(){function t(){this.entries=new Map}return t.prototype.add=function(t){c.isNull(t)||this.entries.set(t.id,t)},t.prototype.addMany=function(t){var e,n;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=r.next();!o.done;o=r.next()){var i=o.value;this.add(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.get=function(t,e){return this.entries.get(A.Id(t,e))},t}(),K=function(){function t(){}return t.get=function(){var e=new U;return e.addMany(A.newMany(d.Idle,[r.MoveRight,r.MoveLeft,r.MoveUp,r.MoveDown],[d.FacingRight,d.FacingLeft,d.FacingUp,d.FacingDown])),e.add(new A(d.FacingLeft,r.MoveLeft,d.MovingLeft,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.FacingLeft,[r.MoveUp,r.MoveRight,r.MoveDown,r.Die],[d.FacingUp,d.FacingRight,d.FacingDown,d.Dead])),e.add(new A(d.FacingUp,r.MoveUp,d.MovingUp,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.FacingUp,[r.MoveLeft,r.MoveRight,r.MoveDown,r.Die],[d.FacingLeft,d.FacingRight,d.FacingDown,d.Dead])),e.add(new A(d.FacingRight,r.MoveRight,d.MovingRight,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.FacingRight,[r.MoveLeft,r.MoveUp,r.MoveDown,r.Die],[d.FacingLeft,d.FacingUp,d.FacingDown,d.Dead])),e.add(new A(d.FacingDown,r.MoveDown,d.MovingDown,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.FacingDown,[r.MoveLeft,r.MoveUp,r.MoveRight,r.Die],[d.FacingLeft,d.FacingUp,d.FacingRight,d.Dead])),e.add(new A(d.MovingLeft,r.MoveLeft,d.MovingLeft,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.MovingLeft,[r.MoveUp,r.MoveRight,r.MoveDown,r.Die],[d.FacingUp,d.FacingRight,d.FacingDown,d.Dead])),e.add(new A(d.MovingLeft,r.Stop,d.FacingLeft)),e.add(new A(d.MovingUp,r.MoveUp,d.MovingUp,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.MovingUp,[r.MoveLeft,r.MoveRight,r.MoveDown,r.Die],[d.FacingLeft,d.FacingRight,d.FacingDown,d.Dead])),e.add(new A(d.MovingUp,r.Stop,d.FacingUp)),e.add(new A(d.MovingRight,r.MoveRight,d.MovingRight,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.MovingRight,[r.MoveLeft,r.MoveUp,r.MoveDown,r.Die],[d.FacingLeft,d.FacingUp,d.FacingDown,d.Dead])),e.add(new A(d.MovingRight,r.Stop,d.FacingRight)),e.add(new A(d.MovingDown,r.MoveDown,d.MovingDown,(function(e,n,r){return t.MoveBlockConditions(e,n,r)}),(function(e,n,r,o){return t.BlockMovedSuccess(e,n,r,o)}))),e.addMany(A.newMany(d.MovingDown,[r.MoveLeft,r.MoveUp,r.MoveRight,r.Die],[d.FacingLeft,d.FacingUp,d.FacingRight,d.Dead])),e},t.MoveBlockConditions=function(t,e,n){var o=null;switch(n){case r.MoveDown:o=e.at.translateY(1);break;case r.MoveRight:o=e.at.translateX(1);break;case r.MoveLeft:o=e.at.translateX(-1);break;case r.MoveUp:o=e.at.translateY(-1)}if(!t.contains(e,o))return new L(!1);if(t.isObstacleFree(e,o)){var i=[];return e instanceof v&&(i=Array.from(t.tracker.ogres(e,o))),new L(!0,new R(o,i))}return new L(!1)},t.BlockMovedSuccess=function(t,e,n,o){var i,a;if(!c.isNull(o)){e.move(o.target);try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(o.ogresToKill),u=s.next();!u.done;u=s.next()){var l=u.value;t.do(l,r.Die),t.remove(l)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}},t}(),B=function(){function t(t){this._id=n.new(),this.ground=t,this.players=new Map,this.obstacles=new Map,this.tracker=new F,this.control=K.get()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.ground.polygon.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.ground.polygon.height},enumerable:!1,configurable:!0}),t.prototype.do=function(t,e){var n=this.control.get(t.state,e);if(c.isNull(n))return!1;if(c.isNull(n.When))return t.state=n.finalState,c.isNull(n.OnSuccess)||n.OnSuccess(this,t,e,null),!0;var r=n.When(this,t,e);return r.success?(t.state=n.finalState,c.isNull(n.OnSuccess)||n.OnSuccess(this,t,e,r.onSuccessArgs),!0):(c.isNull(n.OnFailure)||n.OnFailure(this,t,e,r.onFailureArgs),!1)},t.prototype.doMany=function(t,e,n){for(void 0===n&&(n=1);this.do(t,e)&&--n>0;);},t.prototype.add=function(t,e){var n=this;if(void 0===e&&(e=null),c.isNull(e)){for(var r=s.random(this.width,this.height);!this.isObstacleFree(t,r);)r=s.random(this.width,this.height);e=r}if(this.contains(t,e))switch(t.OnMoved=function(t){return n.tracker.add(t)},t.move(e),t.type){case y.Player:this.players.set(t.id,t),c.isNull(this.onPlayerAdded)||this.onPlayerAdded(t);break;case y.Obstacle:this.obstacles.set(t.id,t)}},t.prototype.remove=function(t){t.type==y.Player&&(this.players.delete(t.id),c.isNull(this.onPlayerRemoved)||this.onPlayerRemoved(t)),t.type==y.Obstacle&&this.obstacles.delete(t.id),this.tracker.remove(t)},t.prototype.getPlayer=function(t){return this.players.has(t)?this.players.get(t):null},t.prototype.isObstacleFree=function(t,e){var n,r,o=!0;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.tracker.obstacles(t,e)),a=i.next();!a.done;a=i.next()){a.value,o=!1;break}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.prototype.contains=function(t,e){var n=this;void 0===e&&(e=null);var r=null!=e?e:t.at;return!t.polygon.translateTo(r).points.some((function(t){return t.x<0||t.x>n.width||t.y<0||t.y>n.height}))},t.prototype.renderOn=function(t){var e=this;if(!c.isNull(t))return this.ground.renderOn(t),this.obstacles.forEach((function(e){e.renderOn(t)})),this.players.forEach((function(e){e.renderOn(t)})),requestAnimationFrame((function(){return e.renderOn(t)}))},t}(),E=function(){function t(){}return t.get=function(t,e,n){for(var r=new B(new _(e,n)),o=Math.floor(e/25),i=Math.floor(n/25),a=0;a<o;a++)r.add(new k,new s(25*a,0)),r.add(new k,new s(25*a,n-25));for(var u=1;u<i-1;u++)r.add(new k,new s(0,25*u)),r.add(new k,new s(e-25,25*u));return r.add(new k,new s(190,180)),r.add(new k,new s(220,180)),r.add(new k,new s(250,180)),r.add(new k,new s(280,180)),r.add(new k,new s(310,180)),r.add(new k,new s(340,180)),r.add(new k,new s(270,210)),r.add(new k,new s(270,240)),r.add(new k,new s(270,270)),r.add(new k,new s(270,300)),r.add(new k,new s(245,315)),r.add(new k,new s(220,310)),r.add(new k,new s(200,290)),r.add(new P),r.add(new P),r.add(new P),r.add(new P),r.add(new P),r},t}(),N=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I=function(){function t(t){this.board=t,this.oneKeyBindings=new Map,this.twoKeyBindings=new Map,this._pressedKeys=new Map}return Object.defineProperty(t.prototype,"pressedKeys",{get:function(){return this._pressedKeys},enumerable:!1,configurable:!0}),t.prototype.exists=function(t){switch(t.keyCount){case 1:return this.oneKeyBindings.has(t.id);case 2:return this.twoKeyBindings.has(t.id)}},t.prototype.track=function(t){var e,n,r,o;try{for(var i=N(this.oneKeyBindings.values()),a=i.next();!a.done;a=i.next()){var s=a.value;s.active=s.eval(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}try{for(var u=N(this.twoKeyBindings.values()),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.eval(t);l.active=p,p&&(this.oneKeyBindings.get(l.key1).active=this.oneKeyBindings.get(l.key2).active=!1)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},t.prototype.runKey=function(t){t.active&&(t.action.runMany?this.board.doMany(t.block,t.action,5):this.board.do(t.block,t.action))},t.prototype.runKeys=function(){var t=this;this.track(this.pressedKeys),this.twoKeyBindings.forEach((function(e,n){return t.runKey(e)})),this.oneKeyBindings.forEach((function(e,n){return t.runKey(e)}))},t.prototype.add=function(t){if(!c.isNull(t)&&!this.exists(t))switch(t.keyCount){case 1:this.oneKeyBindings.set(t.id,t);break;case 2:this.twoKeyBindings.set(t.id,t)}},t}(),T=function(){function t(t,e,n){this.active=!1,this._block=t,this._action=e,this._keyCount=n}return Object.defineProperty(t.prototype,"block",{get:function(){return this._block},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this._action},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyCount",{get:function(){return this._keyCount},enumerable:!1,configurable:!0}),t}(),q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(e,n,r){var o=t.call(this,n,r,1)||this;return o._key=e,o}return q(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.key},enumerable:!1,configurable:!0}),e.prototype.eval=function(t){return t.has(this.key)},e}(T),X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t){function e(e,n){var o=t.call(this,e)||this;return o.add(new W(r.MoveRight.id,n,r.MoveRight)),o.add(new W(r.MoveLeft.id,n,r.MoveLeft)),o.add(new W(r.MoveUp.id,n,r.MoveUp)),o.add(new W(r.MoveDown.id,n,r.MoveDown)),o.changeAction(),o}return X(e,t),e.prototype.changeAction=function(){for(var t=this.randomAction();t==this.currentAction;)t=this.randomAction();this.pressedKeys.delete(r.MoveRight.id),this.pressedKeys.delete(r.MoveLeft.id),this.pressedKeys.delete(r.MoveDown.id),this.pressedKeys.delete(r.MoveUp.id),this.pressedKeys.set(t.id,null),this.currentAction=t},e.prototype.randomAction=function(){switch(i.new(1,4)){case 1:return r.MoveRight;case 2:return r.MoveUp;case 3:return r.MoveLeft;case 4:return r.MoveDown}},e.prototype.attach=function(){var t=this;this.detach(),this.changeActionTimer=window.setInterval((function(){return t.changeAction()}),i.new(500,1e3)),this.timer=window.setInterval((function(){return t.runKeys()}),i.new(15,20))},e.prototype.detach=function(){window.clearInterval(this.timer),window.clearInterval(this.changeActionTimer)},e}(I),G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(t){function e(e){var n=t.call(this,e)||this;return onkeydown=onkeyup=function(t){"keydown"==t.type?n.pressedKeys.set(t.code,t):n.pressedKeys.delete(t.code)},n}return G(e,t),e.prototype.attach=function(){var t=this;window.clearInterval(this.timer),this.timer=window.setInterval((function(){return t.runKeys()}),20)},e.prototype.detach=function(){window.clearInterval(this.timer)},e}(I),H=function(){this.canvasId="#game-canvas",this.width=600,this.height=500,this.mapName="grass",this.maxOgresKilled=20},V=function(){this.ogresKilled=0,this.secondsElapsed=0};!function(t){t[t.Uninitilized=0]="Uninitilized",t[t.Running=1]="Running",t[t.Paused=2]="Paused",t[t.Completed=3]="Completed"}(e||(e={}));var J=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=function(){function t(t){void 0===t&&(t=null);var n,r=this;this.settings=null!=t?t:new H,this.board=E.get(this.settings.mapName,this.settings.width,this.settings.height),this.stats=new V,this.status=e.Uninitilized,this.board.onPlayerRemoved=function(t){t instanceof b&&(r.stats.ogresKilled++,r.statsChanged(),r.board.add(new b),r.stats.ogresKilled==r.settings.maxOgresKilled&&r.gameCompleted())},this.keyboardController=new z(this.board),this.autopilots=new Map,this.canvas=document.querySelector(this.settings.canvasId),this.canvas.width=this.settings.width,this.canvas.height=this.settings.height,this.ctx=null===(n=this.canvas)||void 0===n?void 0:n.getContext("2d")}return t.prototype.gameCompleted=function(){this.pause(),c.isNull(this.onGameCompleted)||this.onGameCompleted(),this.status=e.Completed},t.prototype.statsChanged=function(){c.isNull(this.onStatsChanged)||this.onStatsChanged()},t.prototype.addPlayers=function(){var t=this,e=new v("Jhon");this.board.add(e),this.keyboardController.attach(),this.keyboardController.add(new W("ArrowRight",e,r.MoveRight)),this.keyboardController.add(new W("ArrowLeft",e,r.MoveLeft)),this.keyboardController.add(new W("ArrowUp",e,r.MoveUp)),this.keyboardController.add(new W("ArrowDown",e,r.MoveDown)),this.board.onPlayerAdded=function(e){if(e instanceof b){var n=e,r=new Y(t.board,n);t.autopilots.set(n.id,r),r.attach()}},this.board.add(new b),this.board.add(new b),this.board.add(new b),this.board.add(new b)},t.prototype.start=function(){var t=this;this.addPlayers(),this.requestId=this.board.renderOn(this.ctx),this.status=e.Running,this.timer=setInterval((function(){t.status==e.Running&&t.stats.secondsElapsed++}),1e3)},t.prototype.resume=function(){var t,n;this.keyboardController.attach();try{for(var r=J(this.autopilots.values()),o=r.next();!o.done;o=r.next())o.value.attach()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this.status=e.Running},t.prototype.pause=function(){var t,n;this.keyboardController.detach();try{for(var r=J(this.autopilots.values()),o=r.next();!o.done;o=r.next())o.value.detach()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this.status=e.Paused},t.prototype.dispose=function(){this.status=e.Completed,this.pause(),cancelAnimationFrame(this.requestId)},t}(),Z=function(){function t(t,e){void 0===e&&(e="none"),this.popupSelector=t,this.triggerSelector=e,this.popup=document.querySelector(t),this.trigger=document.querySelector(e),this.bind()}return t.prototype.bind=function(){var t,e,n,r,o,i=this;null===(t=this.trigger)||void 0===t||t.addEventListener("click",(function(t){return i.open()})),null===(n=null===(e=this.popup)||void 0===e?void 0:e.querySelector(".btn-cancel"))||void 0===n||n.addEventListener("click",(function(t){return i.cancel()})),null===(o=null===(r=this.popup)||void 0===r?void 0:r.querySelector(".btn-ok"))||void 0===o||o.addEventListener("click",(function(t){return i.ok()}))},t.prototype.hide=function(){this.popup.classList.add("hide")},t.prototype.unhide=function(){this.popup.classList.remove("hide")},t.prototype.ok=function(){c.isNull(this.OnOKClicked)||this.OnOKClicked(),this.hide()},t.prototype.cancel=function(){this.hide(),c.isNull(this.OnCancelClicked)||this.OnCancelClicked()},t.prototype.open=function(){c.isNull(this.BeforeOpening)||this.BeforeOpening(),this.unhide(),c.isNull(this.OnOpened)||this.OnOpened()},t}();(new(function(){function t(){var t=this;this.game=new Q,this.game.onStatsChanged=function(){return t.renderStats()},this.game.onGameCompleted=function(){t.finishedPopup.open(),console.log("open")},this.startupPopup=new Z("#startup-popup"),this.restartPopup=new Z("#restart-popup","#restart-popup-trigger"),this.menuPopup=new Z("#menu-popup","#menu-popup-trigger"),this.finishedPopup=new Z("#finished-popup"),this.startupPopup.BeforeOpening=this.restartPopup.BeforeOpening=this.menuPopup.BeforeOpening=function(){t.menuPopup.hide(),t.restartPopup.hide(),t.finishedPopup.hide()},this.startupPopup.OnOKClicked=function(){var e;t.game.start(),null===(e=document.querySelector("#status-bar"))||void 0===e||e.classList.remove("hide")},this.menuPopup.OnOpened=this.restartPopup.OnOpened=function(){return t.game.pause()},this.menuPopup.OnOKClicked=function(){t.game.resume()},this.menuPopup.OnCancelClicked=this.restartPopup.OnCancelClicked=function(){return t.game.resume()},this.restartPopup.OnOKClicked=this.finishedPopup.OnOKClicked=function(){return t.restart()}}return t.prototype.restart=function(){location.reload()},t.prototype.renderStats=function(){document.querySelector("#ogres-killed").textContent=this.game.stats.ogresKilled.toString(),document.querySelector("#time-elapsed").textContent="".concat(this.game.stats.secondsElapsed.toString()," seconds")},t.prototype.startup=function(){var t=this;window.onload=function(){t.startupPopup.open()}},t}())).startup()})();